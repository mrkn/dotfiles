#!/bin/bash

PREFIX=/opt/arrow-dev

while [[ $# -gt 0 ]]; do
  case "$1" in
    --prefix)
      shift
      PREFIX="$1"
      ;;
    --)
      break
      ;;
  esac
  shift
done

export PKG_CONFIG_PATH=$PREFIX/lib/pkgconfig:$PREFIX/lib/x86_64-linux-gnu/pkgconfig:$PKG_CONFIG_PATH
export LD_LIBRARY_PATH=$PREFIX/lib:$PREFIX/lib/x86_64-linux-gnu:$LD_LIBRARY_PATH
export DYLD_LIBRARY_PATH=$PREFIX/lib:$PREFIX/lib/x86_64-linux-gnu:$DYLD_LIBRARY_PATH

arrow_glib_libdir=$(pkg-config --variable=libdir arrow-glib)
export GI_TYPELIB_PATH=${arrow_glib_libdir}/girepository-1.0:$GI_TYPELIB_PATH
unset arrow_glib_libdir

exec "$@"
